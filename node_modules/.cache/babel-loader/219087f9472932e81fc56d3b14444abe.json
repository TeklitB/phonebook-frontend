{"ast":null,"code":"import _objectSpread from\"/home/techb/Documents/open-2020-full-stack/phonebook-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/techb/Documents/open-2020-full-stack/phonebook-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Persons from'./components/Persons';import Filter from'./components/Filter';import PersonForm from'./components/PersonForm';import SinglePerson from'./components/SinglePerson';import bookServices from'./services/book';import Notification from'./components/Notification';var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),searchName=_useState8[0],setSearchName=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),successMessage=_useState10[0],setSuccessMessage=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),errorMessage=_useState12[0],setErrorMessage=_useState12[1];useEffect(function(){bookServices.getAll().then(function(initialNotes){setPersons(initialNotes);});},[]);var addName=function addName(event){event.preventDefault();var found=persons.find(function(person){return person.name===newName;});var foundPerson=persons.find(function(person){return person.name===newName;});if(found){var id=foundPerson.id;if(window.confirm(\"\".concat(newName,\" is already added to phonebook, replace the old number with a new one?\"))){var changeNumber=_objectSpread(_objectSpread({},foundPerson),{},{number:newNumber});bookServices.update(id,changeNumber).then(function(retNumber){setPersons(persons.map(function(person){return person.name!==newName?person:retNumber;}));setSuccessMessage(\"\".concat(newName,\"'s number updated.\"));setTimeout(function(){setSuccessMessage(null);},5000);setNewName('');setNewNumber('');}).catch(function(error){console.log(error);setErrorMessage(\"Information of '\".concat(newName,\"' has already been removed from server\"));setTimeout(function(){setErrorMessage('');},5000);setPersons(persons.filter(function(n){return n.id!==id;}));setNewName('');setNewNumber('');});}}else{var nameObject={name:newName,number:newNumber};bookServices.create(nameObject).then(function(returnedName){setPersons(persons.concat(returnedName));setSuccessMessage(\"Added '\".concat(newName,\"'\"));setTimeout(function(){setSuccessMessage('');},5000);setNewName('');setNewNumber('');}).catch(function(error){setErrorMessage(error.response.data);console.log('== ',error.response.data,'==');});}};var handleNewName=function handleNewName(event){//console.log(event.target.value)\nsetNewName(event.target.value);};var handleNewNumber=function handleNewNumber(event){//console.log(event.target.value)\nsetNewNumber(event.target.value);};var _deleteContact=function deleteContact(id){var deletePerson=persons.find(function(n){return n.id===id;});if(window.confirm(\"Delete '\".concat(deletePerson.name,\"'?\"))){bookServices.deleteP(id).then(function(returnedPerson){setPersons(persons.filter(function(person){return person.id!==id;}));//console.log(returnedPerson)\n}).catch(function(error){alert(\" '\".concat(deletePerson.name,\"' was already deleted\"));});}};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Phonebook\"),/*#__PURE__*/React.createElement(Notification,{successMessage:successMessage,errorMessage:errorMessage}),/*#__PURE__*/React.createElement(Filter,{searchName:searchName,setSearchName:setSearchName}),/*#__PURE__*/React.createElement(SinglePerson,{searchName:searchName,persons:persons}),/*#__PURE__*/React.createElement(\"h2\",null,\"Add a new\"),/*#__PURE__*/React.createElement(PersonForm,{newName:newName,handleNewName:handleNewName,newNumber:newNumber,handleNewNumber:handleNewNumber,addName:addName}),/*#__PURE__*/React.createElement(\"h2\",null,\"Numbers\"),persons.map(function(person){return/*#__PURE__*/React.createElement(Persons,{key:person.name,person:person,deleteContact:function deleteContact(){return _deleteContact(person.id);}});}));};export default App;","map":{"version":3,"sources":["/home/techb/Documents/open-2020-full-stack/phonebook-frontend/src/App.js"],"names":["React","useState","useEffect","Persons","Filter","PersonForm","SinglePerson","bookServices","Notification","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","searchName","setSearchName","successMessage","setSuccessMessage","errorMessage","setErrorMessage","getAll","then","initialNotes","addName","event","preventDefault","found","find","person","name","foundPerson","id","window","confirm","changeNumber","number","update","retNumber","map","setTimeout","catch","error","console","log","filter","n","nameObject","create","returnedName","concat","response","data","handleNewName","target","value","handleNewNumber","deleteContact","deletePerson","deleteP","returnedPerson","alert"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport SinglePerson from './components/SinglePerson'\nimport bookServices from './services/book'\nimport Notification from './components/Notification'\n\nconst App = () => {\n    const [persons, setPersons] = useState([])\n    const [newName, setNewName] = useState('')\n    const [newNumber, setNewNumber] = useState('')\n    const [searchName, setSearchName] = useState('')\n    const [successMessage, setSuccessMessage] = useState('')\n    const [errorMessage, setErrorMessage] = useState('')\n\n    useEffect(() => {\n        bookServices\n            .getAll()\n            .then(initialNotes => {\n                setPersons(initialNotes)\n            })\n    }, [])\n\n    const addName = (event) => {\n        event.preventDefault();\n\n        const found = persons.find(person => person.name === newName)\n        const foundPerson = persons.find(person => person.name === newName)\n\n        if (found) {\n            const id = foundPerson.id\n            if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n                const changeNumber = { ...foundPerson, number: newNumber }\n                bookServices\n                    .update(id, changeNumber)\n                    .then(retNumber => {\n                        setPersons(persons.map(person => person.name !== newName ? person : retNumber))\n                        setSuccessMessage(\n                            `${newName}'s number updated.`\n                        )\n                        setTimeout(() => {\n                            setSuccessMessage(null)\n                        }, 5000)\n                        setNewName('')\n                        setNewNumber('')\n                    })\n                    .catch(error => {\n                        console.log(error)\n                        setErrorMessage(\n                            `Information of '${newName}' has already been removed from server`\n                        )\n                        setTimeout(() => {\n                            setErrorMessage('')\n                        }, 5000)\n                        setPersons(persons.filter(n => n.id !== id))\n                        setNewName('')\n                        setNewNumber('')\n                    })\n            }\n\n        } else {\n            const nameObject = {\n                name: newName,\n                number: newNumber\n            }\n            bookServices\n                .create(nameObject)\n                .then(returnedName => {\n                    setPersons(persons.concat(returnedName))\n                    setSuccessMessage(\n                        `Added '${newName}'`\n                    )\n                    setTimeout(() => {\n                        setSuccessMessage('')\n                    }, 5000)\n                    setNewName('')\n                    setNewNumber('')\n                })\n                .catch((error) => {\n                    setErrorMessage(error.response.data)\n                    console.log('== ', error.response.data, '==')\n                })\n        }\n    }\n    const handleNewName = (event) => {\n        //console.log(event.target.value)\n        setNewName(event.target.value)\n    }\n\n    const handleNewNumber = (event) => {\n        //console.log(event.target.value)\n        setNewNumber(event.target.value)\n    }\n\n    const deleteContact = id => {\n        const deletePerson = persons.find(n => n.id === id)\n\n        if (window.confirm(`Delete '${deletePerson.name}'?`)) {\n            bookServices\n                .deleteP(id)\n                .then(returnedPerson => {\n                    setPersons(persons.filter(person => person.id !== id))\n                    //console.log(returnedPerson)\n                })\n                .catch(error => {\n                    alert(\n                        ` '${deletePerson.name}' was already deleted`\n                    )\n                })\n        }\n    }\n\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            <Notification successMessage={successMessage} errorMessage={errorMessage} />\n            <Filter searchName={searchName} setSearchName={setSearchName} />\n            <SinglePerson searchName={searchName} persons={persons} />\n            <h2>Add a new</h2>\n            <PersonForm newName={newName} handleNewName={handleNewName}\n                newNumber={newNumber} handleNewNumber={handleNewNumber}\n                addName={addName}\n            />\n            <h2>Numbers</h2>\n            {persons.map(person => <Persons key={person.name} person={person}\n                deleteContact={() => deleteContact(person.id)} />\n            )}\n        </div>\n    )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}